"use strict";(self.webpackChunkng_test_work=self.webpackChunkng_test_work||[]).push([[891],{4579:(T,v,a)=>{a.d(v,{f:()=>J});var x=a(2096),u=a(4664),n=a(5592),c=a(7394);class S extends c.w0{constructor(e,r){super()}schedule(e,r=0){return this}}const w={setInterval(i,e,...r){const{delegate:t}=w;return t?.setInterval?t.setInterval(i,e,...r):setInterval(i,e,...r)},clearInterval(i){const{delegate:e}=w;return(e?.clearInterval||clearInterval)(i)},delegate:void 0};var C=a(9039);const U={now:()=>(U.delegate||Date).now(),delegate:void 0};class h{constructor(e,r=h.now){this.schedulerActionCtor=e,this.now=r}schedule(e,r=0,t){return new this.schedulerActionCtor(this,e).schedule(t,r)}}h.now=U.now;const z=new class y extends h{constructor(e,r=h.now){super(e,r),this.actions=[],this._active=!1}flush(e){const{actions:r}=this;if(this._active)return void r.push(e);let t;this._active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=r.shift());if(this._active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}}}(class m extends S{constructor(e,r){super(e,r),this.scheduler=e,this.work=r,this.pending=!1}schedule(e,r=0){var t;if(this.closed)return this;this.state=e;const o=this.id,s=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(s,o,r)),this.pending=!0,this.delay=r,this.id=null!==(t=this.id)&&void 0!==t?t:this.requestAsyncId(s,this.id,r),this}requestAsyncId(e,r,t=0){return w.setInterval(e.flush.bind(e,this),t)}recycleAsyncId(e,r,t=0){if(null!=t&&this.delay===t&&!1===this.pending)return r;null!=r&&w.clearInterval(r)}execute(e,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const t=this._execute(e,r);if(t)return t;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,r){let o,t=!1;try{this.work(e)}catch(s){t=!0,o=s||new Error("Scheduled action threw falsy error")}if(t)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:e,scheduler:r}=this,{actions:t}=r;this.work=this.state=this.scheduler=null,this.pending=!1,(0,C.P)(t,this),null!=e&&(this.id=this.recycleAsyncId(r,e,null)),this.delay=null,super.unsubscribe()}}});var D=a(671);var M=a(1631),P=a(7715),H=a(6328),F=a(7398),O=a(9360),E=a(8251),l=a(4946);let j=(()=>{var i;class e{get(t){const o=localStorage.getItem(t);if(o)return JSON.parse(o)}set(t,o){localStorage.setItem(t,JSON.stringify(o))}delete(t){localStorage.removeItem(t)}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();class N{constructor(e){this.temperature=e.temperature,this.weatherCode=e.weatherCode,this.hourlyTemperature2m=e.hourlyTemperature2m,this.dayPart=e.dayPart}}var R=a(9862);let G=(()=>{var i;class e{constructor(t){this.httpClient=t}get(t,o){const s=this.genUrl(t,o);return this.httpClient.get(s).pipe((0,F.U)(({current_weather:p,hourly:d})=>new N({temperature:p.temperature,weatherCode:p.weathercode,hourlyTemperature2m:d.temperature_2m,dayPart:p.is_day?"day":"night"})))}genUrl(t,o){return`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${o}&current_weather=true&hourly=temperature_2m`}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(R.eN))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();class W{constructor(e){this.id=e.id,this.email=e.email,this.gender=e.gender,this.name=e.name,this.picture=e.picture,this.city=e.city,this.country=e.country,this.latitude=e.latitude,this.longitude=e.longitude}}let $=(()=>{var i;class e{constructor(t){this.httpClient=t}get(t){const o=this.genUrl(t);return this.httpClient.get(o).pipe((0,F.U)(({results:s})=>s.map(({id:p,email:d,gender:f,picture:k,location:I,name:A})=>new W({email:d,gender:f,id:p.value,picture:k.large,city:I.city,country:I.country,name:`${A.title} ${A.first} ${A.last}`,latitude:I.coordinates.latitude,longitude:I.coordinates.longitude}))))}genUrl(t){return`https://randomuser.me/api/?results=${t}`}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(R.eN))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),J=(()=>{var i;class e{constructor(t,o,s){this.storageService=t,this.forecastRest=o,this.usersRest=s,this.storageCollectionKey="users.collection",this.storageUserKey=p=>`users.${p}`,this.millisecondsInMinute=6e4,this.updateForecastInterval=5*this.millisecondsInMinute}get(t=20){return this.makeUsersStream(this.usersRest.get(t),t)}getSaved(){const o=(this.storageService.get(this.storageCollectionKey)||[]).map(s=>this.storageUserKey(s)).map(s=>this.storageService.get(s)).filter(s=>!!s);return this.makeUsersStream((0,x.of)(o),o.length)}save(t){const o=this.storageUserKey(t.id),s=this.storageService.get(this.storageCollectionKey)||[];this.storageService.get(o)||s.includes(t.id)||(this.storageService.set(this.storageCollectionKey,[...s,t.id]),this.storageService.set(o,t))}makeUsersStream(t,o){return t.pipe((0,u.w)(s=>function Z(i=0,e,r=z){let t=-1;return null!=e&&((0,D.K)(e)?r=e:t=e),new n.y(o=>{let s=function L(i){return i instanceof Date&&!isNaN(i)}(i)?+i-r.now():i;s<0&&(s=0);let p=0;return r.schedule(function(){o.closed||(o.next(p++),0<=t?this.schedule(void 0,t):o.complete())},s)})}(0,this.updateForecastInterval).pipe((0,M.z)(()=>(0,P.D)(s)))),(0,H.b)(s=>this.forecastRest.get(s.latitude,s.longitude).pipe((0,F.U)(p=>({user:s,forecast:p})))),function K(i,e=null){return e=e??i,(0,O.e)((r,t)=>{let o=[],s=0;r.subscribe((0,E.x)(t,p=>{let d=null;s++%e==0&&o.push([]);for(const f of o)f.push(p),i<=f.length&&(d=d??[],d.push(f));if(d)for(const f of d)(0,C.P)(o,f),t.next(f)},()=>{for(const p of o)t.next(p);t.complete()},void 0,()=>{o=null}))})}(o))}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(j),l.LFG(G),l.LFG($))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})()},9266:(T,v,a)=>{a.d(v,{r:()=>C});const x=JSON.parse('{"0":{"day":{"description":"Sunny","image":"http://openweathermap.org/img/wn/01d@2x.png"},"night":{"description":"Clear","image":"http://openweathermap.org/img/wn/01n@2x.png"}},"1":{"day":{"description":"Mainly Sunny","image":"http://openweathermap.org/img/wn/01d@2x.png"},"night":{"description":"Mainly Clear","image":"http://openweathermap.org/img/wn/01n@2x.png"}},"2":{"day":{"description":"Partly Cloudy","image":"http://openweathermap.org/img/wn/02d@2x.png"},"night":{"description":"Partly Cloudy","image":"http://openweathermap.org/img/wn/02n@2x.png"}},"3":{"day":{"description":"Cloudy","image":"http://openweathermap.org/img/wn/03d@2x.png"},"night":{"description":"Cloudy","image":"http://openweathermap.org/img/wn/03n@2x.png"}},"45":{"day":{"description":"Foggy","image":"http://openweathermap.org/img/wn/50d@2x.png"},"night":{"description":"Foggy","image":"http://openweathermap.org/img/wn/50n@2x.png"}},"48":{"day":{"description":"Rime Fog","image":"http://openweathermap.org/img/wn/50d@2x.png"},"night":{"description":"Rime Fog","image":"http://openweathermap.org/img/wn/50n@2x.png"}},"51":{"day":{"description":"Light Drizzle","image":"http://openweathermap.org/img/wn/09d@2x.png"},"night":{"description":"Light Drizzle","image":"http://openweathermap.org/img/wn/09n@2x.png"}},"53":{"day":{"description":"Drizzle","image":"http://openweathermap.org/img/wn/09d@2x.png"},"night":{"description":"Drizzle","image":"http://openweathermap.org/img/wn/09n@2x.png"}},"55":{"day":{"description":"Heavy Drizzle","image":"http://openweathermap.org/img/wn/09d@2x.png"},"night":{"description":"Heavy Drizzle","image":"http://openweathermap.org/img/wn/09n@2x.png"}},"56":{"day":{"description":"Light Freezing Drizzle","image":"http://openweathermap.org/img/wn/09d@2x.png"},"night":{"description":"Light Freezing Drizzle","image":"http://openweathermap.org/img/wn/09n@2x.png"}},"57":{"day":{"description":"Freezing Drizzle","image":"http://openweathermap.org/img/wn/09d@2x.png"},"night":{"description":"Freezing Drizzle","image":"http://openweathermap.org/img/wn/09n@2x.png"}},"61":{"day":{"description":"Light Rain","image":"http://openweathermap.org/img/wn/10d@2x.png"},"night":{"description":"Light Rain","image":"http://openweathermap.org/img/wn/10n@2x.png"}},"63":{"day":{"description":"Rain","image":"http://openweathermap.org/img/wn/10d@2x.png"},"night":{"description":"Rain","image":"http://openweathermap.org/img/wn/10n@2x.png"}},"65":{"day":{"description":"Heavy Rain","image":"http://openweathermap.org/img/wn/10d@2x.png"},"night":{"description":"Heavy Rain","image":"http://openweathermap.org/img/wn/10n@2x.png"}},"66":{"day":{"description":"Freezing Rain","image":"http://openweathermap.org/img/wn/10d@2x.png"},"night":{"description":"Freezing Rain","image":"http://openweathermap.org/img/wn/10n@2x.png"}},"67":{"day":{"description":"Freezing Rain","image":"http://openweathermap.org/img/wn/10d@2x.png"},"night":{"description":"Freezing Rain","image":"http://openweathermap.org/img/wn/10n@2x.png"}},"71":{"day":{"description":"Light Snow","image":"http://openweathermap.org/img/wn/13d@2x.png"},"night":{"description":"Light Snow","image":"http://openweathermap.org/img/wn/13n@2x.png"}},"73":{"day":{"description":"Snow","image":"http://openweathermap.org/img/wn/13d@2x.png"},"night":{"description":"Snow","image":"http://openweathermap.org/img/wn/13n@2x.png"}},"75":{"day":{"description":"Heavy Snow","image":"http://openweathermap.org/img/wn/13d@2x.png"},"night":{"description":"Heavy Snow","image":"http://openweathermap.org/img/wn/13n@2x.png"}},"77":{"day":{"description":"Snow Grains","image":"http://openweathermap.org/img/wn/13d@2x.png"},"night":{"description":"Snow Grains","image":"http://openweathermap.org/img/wn/13n@2x.png"}},"80":{"day":{"description":"Light Showers","image":"http://openweathermap.org/img/wn/09d@2x.png"},"night":{"description":"Light Showers","image":"http://openweathermap.org/img/wn/09n@2x.png"}},"81":{"day":{"description":"Showers","image":"http://openweathermap.org/img/wn/09d@2x.png"},"night":{"description":"Showers","image":"http://openweathermap.org/img/wn/09n@2x.png"}},"82":{"day":{"description":"Heavy Showers","image":"http://openweathermap.org/img/wn/09d@2x.png"},"night":{"description":"Heavy Showers","image":"http://openweathermap.org/img/wn/09n@2x.png"}},"85":{"day":{"description":"Snow Showers","image":"http://openweathermap.org/img/wn/13d@2x.png"},"night":{"description":"Snow Showers","image":"http://openweathermap.org/img/wn/13n@2x.png"}},"86":{"day":{"description":"Snow Showers","image":"http://openweathermap.org/img/wn/13d@2x.png"},"night":{"description":"Snow Showers","image":"http://openweathermap.org/img/wn/13n@2x.png"}},"95":{"day":{"description":"Thunderstorm","image":"http://openweathermap.org/img/wn/11d@2x.png"},"night":{"description":"Thunderstorm","image":"http://openweathermap.org/img/wn/11n@2x.png"}},"96":{"day":{"description":"Thunderstorm With Hail","image":"http://openweathermap.org/img/wn/11d@2x.png"},"night":{"description":"Thunderstorm With Hail","image":"http://openweathermap.org/img/wn/11n@2x.png"}},"99":{"day":{"description":"Thunderstorm With Hail","image":"http://openweathermap.org/img/wn/11d@2x.png"},"night":{"description":"Thunderstorm With Hail","image":"http://openweathermap.org/img/wn/11n@2x.png"}}}');var u=a.t(x,2),n=a(4946),c=a(6814);function S(m,U){if(1&m&&(n.ynx(0),n._uU(1),n._UZ(2,"img",9),n.BQk()),2&m){const h=n.oxw();n.xp6(1),n.hij(" ",h.wmoDescription.description," "),n.xp6(1),n.Q6J("src",h.wmoDescription.image,n.LSH),n.uIk("alt",h.wmoDescription.description)}}const w=["*"];let C=(()=>{var m;class U{constructor(){this.wmoDescription=null,this.lowestTemperature=0,this.highestTemperature=0}ngOnChanges(){const{weatherCode:y,hourlyTemperature2m:g,dayPart:z}=this.forecast,D=y.toString();this.wmoDescription=u[D][z],this.lowestTemperature=Math.min(...g),this.highestTemperature=Math.max(...g)}}return(m=U).\u0275fac=function(y){return new(y||m)},m.\u0275cmp=n.Xpm({type:m,selectors:[["user-card"]],inputs:{user:"user",forecast:"forecast"},features:[n.TTD],ngContentSelectors:w,decls:25,vars:11,consts:[[1,"card"],[1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"card-text"],[4,"ngIf"],[1,"list-group-item","list-group-item-dark"],[3,"src"]],template:function(y,g){1&y&&(n.F$t(),n.TgZ(0,"div",0),n._UZ(1,"img",1),n.TgZ(2,"div",2)(3,"h5",3),n._uU(4),n.qZA()(),n.TgZ(5,"ul",4)(6,"li",5),n._uU(7),n.qZA(),n.TgZ(8,"li",5),n._uU(9),n.qZA(),n.TgZ(10,"li",5),n._uU(11),n.qZA()(),n.TgZ(12,"div",2)(13,"p",6),n.YNc(14,S,3,3,"ng-container",7),n.qZA()(),n.TgZ(15,"ul",4)(16,"li",8),n._uU(17,"Temperature"),n.qZA(),n.TgZ(18,"li",5),n._uU(19),n.qZA(),n.TgZ(20,"li",5),n._uU(21),n.qZA(),n.TgZ(22,"li",5),n._uU(23),n.qZA()(),n.Hsn(24),n.qZA()),2&y&&(n.xp6(1),n.Q6J("src",g.user.picture,n.LSH),n.uIk("alt",g.user.name),n.xp6(3),n.Oqu(g.user.name),n.xp6(3),n.hij("Gender: ",g.user.gender,""),n.xp6(2),n.hij("Email: ",g.user.email,""),n.xp6(2),n.AsE("Location: ",g.user.city,". ",g.user.country,""),n.xp6(3),n.Q6J("ngIf",g.wmoDescription),n.xp6(5),n.hij("Current: ",g.forecast.temperature,""),n.xp6(2),n.hij("Lowest: ",g.lowestTemperature,""),n.xp6(2),n.hij("Highest: ",g.highestTemperature,""))},dependencies:[c.O5],encapsulation:2,changeDetection:0}),U})()},3380:(T,v,a)=>{a.d(v,{n:()=>n});var x=a(6814),u=a(4946);let n=(()=>{var c;class S{}return(c=S).\u0275fac=function(C){return new(C||c)},c.\u0275mod=u.oAB({type:c}),c.\u0275inj=u.cJS({imports:[x.ez]}),S})()},4366:(T,v,a)=>{a.d(v,{C:()=>n});var x=a(5592),u=a(2420);const n=new x.y(u.Z)}}]);